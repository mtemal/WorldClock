<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>CSO Clocks</title>
<style>
  :root{
    --body-font:Arial,Helvetica,sans-serif;
    --bg:#f4f4f4;
    --card:#fff;
    --shadow:0 1px 3px rgba(0,0,0,.15);
    --radius:6px;
    --padding:12px;
    --margin:20px;
    --btn-bg:#2d89ef;
    --btn-hover:#1b5fbd;
    --btn-radius:4px;
  }
  body{
    font-family:var(--body-font);
    margin:var(--margin);
    background:var(--bg);
  }
  h1{font-size:1.8rem;margin:0 0 1.5rem}
  h2{margin:12px 0 6px}
  .clock{
    background:var(--card);
    border-radius:var(--radius);
    padding:var(--padding);
    margin-bottom:1rem;
    box-shadow:var(--shadow);
  }
  .clock h3{margin:0 0 4px;font-size:1.1rem}
  .time{font-size:1.6rem;font-weight:600}
  .controls{margin-top:.5rem}
  input[type="number"],input[type="text"],input[type="datetime-local"]{
    padding:.4rem .6rem;font-size:.9rem;margin-right:.6rem;width:140px}
  button{
    padding:.5rem 1rem;font-size:.9rem;
    background:var(--btn-bg);color:#fff;border:none;
    border-radius:var(--btn-radius)
  }
  button:hover{background:var(--btn-hover)}

  /* Mobile layout – stack the clocks */
  @media (max-width:480px){
    body{margin:1rem}
    input[type="number"],input[type="text"],input[type="datetime-local"]{
      width:calc(100% - 1rem);
      margin-bottom:.5rem
    }
    button{width:100%;margin-bottom:.5rem}
    .controls{display:flex;flex-direction:column}
  }
</style>
</head>
<body>

<h1>CSO Clocks</h1>

<!-- 1️⃣ EST Clock -->
<div class="clock" id="clock-est">
  <h3>Washington D.C.</h3>
  <div class="time" id="time-est">--:--:--</div>
</div>

<!-- 2️⃣ London Clock -->
<div class="clock" id="clock-london">
  <h3>GMT (Zulu)</h3>
  <div class="time" id="time-london">--:--:--</div>
</div>

<!-- 3️⃣ Custom Clock 1 -->
<div class="clock" id="clock-c1">
  <h3>Local Time</h3>
  <div class="time" id="time-c1">--:--:--</div>
  <div class="controls">
    <input type="number" id="offset-c1-h" placeholder="±hh" min="-12" max="14" step="1">
    <input type="number" id="offset-c1-m" placeholder="mm" min="0" max="59" step="1">
    <button id="set-c1">Set</button>
  </div>
</div>

<!-- 4️⃣ Custom Clock 2 -->
<div class="clock" id="clock-c2">
  <h3>Destination Time</h3>
  <div class="time" id="time-c2">--:--:--</div>
  <div class="controls">
    <input type="number" id="offset-c2-h" placeholder="±hh" min="-12" max="14" step="1">
    <input type="number" id="offset-c2-m" placeholder="mm" min="0" max="59" step="1">
    <button id="set-c2">Set</button>
  </div>
</div>

<!-- 5️⃣ Countdown -->
<div class="clock" id="countdown">
  <h3>ETA to Destination</h3>
  <div class="time" id="time-remaining">--:--:--</div>
  <div class="controls">
    <input type="datetime-local" id="target-dt">
    <button id="start-cd">Start</button>
    <button id="reset-cd">Reset</button>
  </div>
</div>

<script>
/* ---------- 1️⃣ EST Clock ---------- */
const estEl = document.getElementById('time-est');
function updateEST(){
  const now = new Date();
  const est = new Intl.DateTimeFormat('en-US', {
    hour:'2-digit', minute:'2-digit', second:'2-digit',
    hour12:false, timeZone:'America/New_York'
  }).format(now);
  estEl.textContent = est;
}
setInterval(updateEST, 1000);
updateEST();

/* ---------- 2️⃣ London Clock ---------- */
const londonEl = document.getElementById('time-london');
function updateLondon(){
  const now = new Date();
  const london = new Intl.DateTimeFormat('en-GB', {
    hour:'2-digit', minute:'2-digit', second:'2-digit',
    hour12:false, timeZone:'Etc/UTC'
  }).format(now);
  londonEl.textContent = london;
}
setInterval(updateLondon, 1000);
updateLondon();

/* ---------- 3️⃣ Custom Clock 1 & 2 ---------- */
const customClocks = [
  {hoursInput:'offset-c1-h', minsInput:'offset-c1-m', setBtn:'set-c1', timeEl:'time-c1'},
  {hoursInput:'offset-c2-h', minsInput:'offset-c2-m', setBtn:'set-c2', timeEl:'time-c2'}
];
const pad = n=>String(n).padStart(2,'0');
const padSec = (n)=>String(n).padStart(2,'0');
customClocks.forEach(cfg=>{
  const hIn = document.getElementById(cfg.hoursInput);
  const mIn = document.getElementById(cfg.minsInput);
  const setBtn = document.getElementById(cfg.setBtn);
  const timeDiv = document.getElementById(cfg.timeEl);
  let intervalId = null;

  setBtn.addEventListener('click',()=>{
    // validation
    const hVal = Number(hIn.value);
    const mVal = Number(mIn.value);
    if(isNaN(hVal) || isNaN(mVal) ||
       hVal < -12 || hVal > 14 || mVal < 0 || mVal > 59){
      alert('Please enter a valid offset: ±hh (‑12 … 14) and mm (0‑59).');
      return;
    }
    if(intervalId) clearInterval(intervalId);

    intervalId = setInterval(()=> {
      const now = new Date();
      const utcMs = now.getTime() + now.getTimezoneOffset()*60000;
      const targetMs = utcMs + (hVal*3600 + mVal*60)*1000;
      const target = new Date(targetMs);
      const hh = pad(target.getHours());
      const mm = pad(target.getMinutes());
      const ss = padSec(target.getSeconds());
      timeDiv.textContent = `${hh}:${mm}:${ss}`;
    }, 1000);
    // set immediately
    const now = new Date();
    const utcMs = now.getTime() + now.getTimezoneOffset()*60000;
    const targetMs = utcMs + (hVal*3600 + mVal*60)*1000;
    const target = new Date(targetMs);
    timeDiv.textContent = `${pad(target.getHours())}:${pad(target.getMinutes())}:${padSec(target.getSeconds())}`;
  });
});

/* ---------- 4️⃣ Countdown ---------- */
const targetDtInput = document.getElementById('target-dt');
const remainingEl = document.getElementById('time-remaining');
const startBtn = document.getElementById('start-cd');
const resetBtn = document.getElementById('reset-cd');
let countdownInterval = null;

function updateCountdown(){
  const target = new Date(targetDtInput.value);
  if(isNaN(target)) return;
  const now = new Date();
  let diff = target - now;
  if(diff < 0){ diff = 0; clearInterval(countdownInterval); }
  const hrs = Math.floor(diff/(3600*1000));
  const mins = Math.floor((diff%(3600*1000))/(60*1000));
  const secs = Math.floor((diff%(60*1000))/1000);
  remainingEl.textContent =
    `${String(hrs).padStart(2,'0')}:${String(mins).padStart(2,'0')}:${String(secs).padStart(2,'0')}`;
}
startBtn.addEventListener('click',()=>{
  if(countdownInterval) clearInterval(countdownInterval);
  updateCountdown();
  countdownInterval = setInterval(updateCountdown, 1000);
});
resetBtn.addEventListener('click',()=>{
  clearInterval(countdownInterval);
  remainingEl.textContent = '--:--:--';
  targetDtInput.value = '';
});
</script>

<p style="font-size:.9rem;color:#555">
  All clocks show the current time in real time.
  <br>Custom clocks let you choose an exact hour + minute offset (no decimals).
  <br>On phones the layout stacks into a single column for easy viewing.</p>
</body>
</html>
